# ğŸ“˜ SUB-BAB 13.4: MANAJEMEN RAHASIA: JANGAN SIMPAN KUNCI DI BAWAH KARPET

## ğŸ¯ Tujuan Pembelajaran
Setelah mempelajari sub-bab ini, kamu akan mampu:
1.  Mengidentifikasi apa yang dimaksud dengan **"Secrets"** dalam pengembangan aplikasi (API Key, Password Database, Sertifikat).
2.  Menjelaskan bahaya fatal dari praktik **Hardcoding Secrets** di dalam kode sumber (Source Code).
3.  Menerapkan praktik terbaik penyimpanan rahasia menggunakan **Environment Variables** dan layanan **Secrets Manager**.

---

## ğŸ”— Context & Hook
Bayangkan kamu membangun rumah yang sangat kokoh dengan pintu baja. Namun, karena takut lupa bawa kunci, kamu menaruh kunci pintu itu di bawah karpet depan rumah.

Apakah rumahmu aman? Sama sekali tidak.

Dalam dunia pemrograman, "kunci di bawah karpet" itu adalah praktik menulis *password* atau *API Key* langsung di dalam kode program (file `.java`, `.js`, atau `.php`). Ini disebut **Hardcoding**. Saat kamu mengunggah kode itu ke GitHub, seluruh dunia (termasuk *bot* hacker) bisa melihat kunci rahasiamu dalam hitungan detik. Akibatnya? Tagihan Cloud membengkak jutaan rupiah karena dipakai orang lain, atau data user dicuri.

---

## ğŸ’¡ Analogi: Dompet vs. Brankas Bank
* **Hardcoding Secrets = Menempel PIN di Kartu ATM:**
    Kamu menulis PIN ATM-mu dengan spidol di kartu itu sendiri. Siapapun yang melihat kartumu, bisa langsung menguras isinya. Sangat ceroboh.
* **Environment Variables = Dompet Pribadi:**
    Kamu menyimpan PIN di ingatanmu (memori) atau catatan tersembunyi yang hanya kamu yang tahu. Saat butuh, kamu "memanggil" ingatan itu. Orang lain yang melihat fisik kartu ATM tidak akan tahu PIN-nya.
* **Secrets Manager (Vault) = Brankas Bank:**
    Untuk kunci yang sangat berharga (seperti kunci utama server), kamu menyimpannya di brankas bank yang dijaga ketat. Aplikasi harus "datang ke bank" (otentikasi) dulu untuk meminjam kunci tersebut sebentar.

---

## ğŸ“š Inti Materi

### 1. Apa itu Secrets?
Secrets adalah segala data kredensial yang memberikan akses ke sistem. Contoh:
* *Database Connection String* (berisi password DB).
* *API Keys* (Stripe, Google Maps, AWS Access Key).
* *Encryption Keys* (Kunci untuk membuka data terenkripsi).
* *Private Certificates*.

### 2. Dosa Besar: Hardcoding
Jangan pernah melakukan ini:
```javascript
// JANGAN DITIRU!
const dbPassword = "Rahasia123";
const awsKey = "AKIAiosFODNN7EXAMPLE";
```
Jika file ini masuk ke Git (Version Control), rahasia itu akan tersimpan selamanya di *history* Git, bahkan jika kamu menghapus barisnya di *commit* berikutnya.

### 3. Solusi 1: Environment Variables (.env)
Simpan rahasia di dalam variabel lingkungan sistem operasi server, bukan di dalam kode.

* Buat file bernama `.env` di komputermu (berisi `DB_PASS=Rahasia123`).
* **Wajib:** Masukkan `.env` ke dalam file `.gitignore` agar **TIDAK IKUT** ter-upload ke Git.
* Di kode program, panggil variabel itu:

```javascript
// Cara yang benar
const dbPassword = process.env.DB_PASS;
```

### 4. Solusi 2: Secrets Manager (Vault)
Untuk sistem skala besar (Enterprise/Cloud), gunakan layanan khusus seperti **AWS Secrets Manager**, **HashiCorp Vault**, atau **Google Secret Manager**.

* Aplikasi tidak menyimpan password sama sekali.
* Saat aplikasi butuh akses database, ia me-request ke Vault.
* Vault bisa melakukan **Rotation** (mengganti password database secara otomatis setiap hari), sehingga jika bocor, password lama sudah tidak berguna.

---

## ğŸ“± Contoh Penerapan: Mobile App (Android/iOS)
Bagaimana dengan aplikasi di HP? HP adalah lingkungan yang "tidak aman" karena fisik HP ada di tangan user (bisa di-*hack*/*reverse engineer*).

1.  **Jangan taruh API Key Server di aplikasi Mobile.** Hacker bisa membongkar APK dan menemukannya.
2.  Jika terpaksa menyimpan token login user, gunakan penyimpanan aman bawaan OS:
    * **Android:** Gunakan **EncryptedSharedPreferences** atau **Android Keystore**.
    * **iOS:** Gunakan **Keychain Services**.
    * Jangan simpan token di file teks biasa atau *Shared Preferences* polos!

---

## ğŸ“– Mini-Glossary
* **Hardcoding:** Praktik menulis data (seperti password) secara langsung dan tetap di dalam kode sumber program.
* **Environment Variables (Env Vars):** Variabel dinamis yang diatur di luar program (di sistem operasi) yang dapat dibaca oleh aplikasi saat berjalan.
* **.gitignore:** File konfigurasi Git yang memberitahu file mana saja yang harus diabaikan dan tidak boleh di-upload ke repository.
* **Key Rotation:** Praktik keamanan mengganti kunci/password secara berkala untuk membatasi dampak jika kunci lama bocor.

---

## ğŸ“ Evaluasi Singkat

### 5 Soal Pilihan Ganda (HOTS)

1.  **Analisis:** Mengapa menyimpan *API Key* pembayaran (seperti Stripe Secret Key) di dalam kode aplikasi Mobile (Android/iOS) sangat berbahaya, meskipun kodenya sudah di-*compile* menjadi APK?
    * a. Karena APK ukurannya akan membesar.
    * b. Karena hacker bisa melakukan *Reverse Engineering* (membongkar) APK tersebut dan menemukan string API Key di dalamnya.
    * c. Karena Apple/Google melarangnya.
    * d. Karena internet HP tidak stabil.
    * e. Karena API Key bisa kedaluwarsa.

2.  **Skenario:** Kamu tidak sengaja melakukan *commit* dan *push* file `.env` yang berisi password database AWS ke repository GitHub publik. Lima menit kemudian kamu sadar. Apa langkah pertama yang paling tepat?
    * a. Menghapus repository GitHub.
    * b. Segera mengganti (Rotate) password database di AWS dan menganggap password lama sudah bocor.
    * c. Melakukan *commit* baru dengan menghapus file `.env`. (Ingat: History Git tetap menyimpan versi lama).
    * d. Berdoa semoga tidak ada yang lihat.
    * e. Menutup akun AWS.

3.  **Teknis:** File apa yang bertugas mencegah file rahasia (seperti `.env` atau `config.json`) terkirim ke server Git?
    * a. `README.md`
    * b. `.gitkeep`
    * c. `.gitignore`
    * d. `package.json`
    * e. `docker-compose.yml`

4.  **Konsep:** Apa keuntungan utama menggunakan layanan *Secrets Manager* (Vault) dibandingkan hanya menggunakan *Environment Variables* biasa?
    * a. Lebih murah.
    * b. Memungkinkan fitur *Automatic Rotation* (pergantian password otomatis berkala) dan audit sentral (siapa yang mengakses password).
    * c. Tidak perlu koneksi internet.
    * d. Kode menjadi lebih pendek.
    * e. Vault bisa menyimpan gambar.

5.  **Identifikasi:** Manakah data di bawah ini yang BOLEH di-*hardcode* di dalam aplikasi karena bukan rahasia?
    * a. Password Admin Database.
    * b. URL endpoint API (misal: `https://api.saya.com`).
    * c. AWS Secret Access Key.
    * d. Private Key untuk tanda tangan JWT.
    * e. Sertifikat SSL Privat.

### Kunci Jawaban
1.  **b** (Di tangan hacker, *client-side code* dianggap tidak aman; *obfuscation* hanya memperlambat, tidak mencegah).
2.  **b** (Mencabut akses kunci yang bocor adalah prioritas utama. Menghapus commit di Git tidak menjamin data belum dicuri bot).
3.  **c** (Fungsi utama `.gitignore`).
4.  **b** (Fitur rotasi dan audit adalah standar keamanan *enterprise*).
5.  **b** (URL publik bukan rahasia, itu alamat yang memang harus diketahui klien).

---

## ğŸš€ Mini Challenge
**Cek Proyekmu:**
1.  Buka salah satu proyek kodingan lamamu (jika ada).
2.  Cari file konfigurasi koneksi database.
3.  Apakah password-nya tertulis di sana (misal: `"root"` atau `"123456"`)?
4.  Jika ya, buat file `.env`, pindahkan password ke sana, dan ubah kodemu untuk membaca dari `process.env`. Jangan lupa buat `.gitignore`!