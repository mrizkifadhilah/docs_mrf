# ðŸ“˜ SUB-BAB 13.2: DUA PENJAGA GERBANG: AUTHN & AUTHZ

## ðŸŽ¯ Tujuan Pembelajaran
Setelah mempelajari sub-bab ini, kamu akan mampu:
1.  Membedakan secara tegas antara **Otentikasi (AuthN)** dan **Otorisasi (AuthZ)**.
2.  Menjelaskan mekanisme **Role-Based Access Control (RBAC)** sebagai standar industri untuk manajemen izin.
3.  Menganalisis skenario keamanan di mana pengguna terverifikasi tetap ditolak aksesnya demi keamanan.

---

## ðŸ”— Context & Hook
Pernahkah kamu mengalami kejadian ini: Kamu berhasil *login* ke website kantor atau kampus (Username dan Password benar), tetapi ketika kamu mencoba membuka halaman "Laporan Keuangan", muncul pesan merah besar: **"Access Denied"** atau **"403 Forbidden"**.

Kamu bingung, "Lho, kan saya sudah login? Kenapa ditolak?"

Di sinilah letak perbedaan krusial antara dua satpam digital: Satpam Depan (AuthN) dan Satpam Ruangan (AuthZ). Banyak developer pemula mencampuradukkan keduanya, padahal memisahkan mereka adalah kunci arsitektur keamanan yang rapi.

---

## ðŸ’¡ Analogi: Resepsionis Hotel dan Kunci Kamar
Bayangkan kamu menginap di hotel bintang lima:

1.  **Otentikasi (AuthN) = Check-in di Resepsionis:**
    Kamu datang ke meja depan, menunjukkan KTP/Paspor. Resepsionis memverifikasi wajahmu sama dengan foto di KTP.
    * *Pertanyaan:* "Siapa kamu?"
    * *Hasil:* Identitas terkonfirmasi (Kamu adalah Budi).

2.  **Otorisasi (AuthZ) = Kartu Akses (Keycard):**
    Setelah terkonfirmasi, resepsionis memberimu kartu akses. Kartu itu diprogram khusus.
    * Kartu itu **BISA** membuka pintu Kamar 305 (kamarmu) dan Gym.
    * Kartu itu **TIDAK BISA** membuka pintu Kamar 306 (kamar orang lain) atau Ruang Manajer Hotel.
    * *Pertanyaan:* "Apa yang boleh kamu lakukan/buka?"

Jika kamu mencoba masuk Ruang Manajer, pintu tidak terbuka. Bukan karena hotel tidak kenal kamu (AuthN sukses), tapi karena kamu tidak punya hak (AuthZ gagal).

---

## ðŸ“š Inti Materi

### 1. Otentikasi (Authentication - AuthN)
Ini adalah langkah pertama: **Verifikasi Identitas**.
* **Tujuan:** Memastikan pengguna adalah benar-benar orang yang dia klaim.
* **Metode:** Password, PIN, Biometrik (Sidik Jari/Wajah), atau OTP (One Time Password).
* **Output:** Jika sukses, sistem tahu *siapa* pengguna tersebut (User ID: 123, Nama: Budi).

### 2. Otorisasi (Authorization - AuthZ)
Ini adalah langkah kedua: **Verifikasi Izin**.
* **Tujuan:** Menentukan sumber daya apa yang boleh diakses oleh identitas yang sudah lolos AuthN tadi.
* **Mekanisme:** Mengecek daftar izin di database atau token.
* **Output:** Mengizinkan (Allow) atau Menolak (Deny) akses ke fitur tertentu (misal: Hapus Data, Edit Artikel).

### 3. Role-Based Access Control (RBAC)
Mengatur izin satu per satu untuk setiap user itu merepotkan. Solusinya adalah **RBAC**.
* User dikelompokkan ke dalam **Peran (Roles)**.
* Izin (Permissions) ditempelkan pada Peran, bukan pada User.
    * *Role Admin:* Boleh Create, Read, Update, Delete (CRUD).
    * *Role Editor:* Boleh Create, Read, Update.
    * *Role Viewer:* Hanya boleh Read.
* Jika Budi naik pangkat, admin tinggal mengubah role-nya dari *Editor* ke *Admin*, tanpa perlu setting izin satu per satu.

---

## ðŸ“± Contoh Penerapan: Google Drive
1.  **AuthN:** Kamu login pakai Gmail. Google tahu kamu adalah "budi@gmail.com".
2.  **AuthZ:** Kamu klik link dokumen yang dikirim bosmu.
    * Sistem cek: "Apakah budi@gmail.com ada di daftar *Shared List* dokumen ini?"
    * Jika bosmu lupa invite, kamu dapat pesan "You need access" (AuthZ gagal), meskipun kamu sudah login Gmail (AuthN sukses).

---

## ðŸ“– Mini-Glossary
* **AuthN (Authentication):** Proses memverifikasi identitas pengguna (Login).
* **AuthZ (Authorization):** Proses menentukan hak akses pengguna terhadap sumber daya (Izin).
* **RBAC (Role-Based Access Control):** Metode pemberian izin berdasarkan peran pengguna dalam organisasi.
* **401 Unauthorized:** Kode error HTTP yang biasanya berarti "Kamu belum login" (Gagal AuthN).
* **403 Forbidden:** Kode error HTTP yang berarti "Kamu sudah login, tapi tidak boleh masuk sini" (Gagal AuthZ).

---

## ðŸ“ Evaluasi Singkat

### 5 Soal Pilihan Ganda (HOTS)

1.  **Skenario:** Seorang pengguna mencoba menghapus komentar orang lain di sebuah forum. Sistem menolak tindakannya dengan pesan "Anda tidak memiliki izin untuk menghapus komentar ini", padahal pengguna tersebut sedang dalam kondisi *login*. Masalah ini berada di ranah mana?
    * a. Otentikasi (AuthN).
    * b. Otorisasi (AuthZ).
    * c. Jaringan internet.
    * d. Database korup.
    * e. Enkripsi.

2.  **Analisis:** Mengapa RBAC (*Role-Based Access Control*) lebih disukai daripada memberikan izin spesifik (*Direct Permissions*) ke setiap individu user di perusahaan besar?
    * a. Karena RBAC lebih aman dari hacker.
    * b. Karena RBAC menyederhanakan manajemen; admin cukup mengelola izin pada beberapa "Role" saja, bukan pada ribuan "User".
    * c. Karena RBAC tidak butuh password.
    * d. Karena RBAC lebih cepat saat login.
    * e. Karena user suka punya role.

3.  **Identifikasi:** Manakah di bawah ini yang merupakan mekanisme **Otentikasi (AuthN)**?
    * a. Memeriksa apakah user berstatus "Premium Member".
    * b. Memasukkan PIN di mesin ATM.
    * c. Membatasi akses folder hanya untuk manajer.
    * d. Menampilkan menu "Edit" hanya untuk admin.
    * e. Mencegah user membuka halaman setting.

4.  **Konsep:** Apa arti kode status HTTP **403 Forbidden** dalam konteks keamanan?
    * a. Server mengenali siapa kamu (Identitas terverifikasi), tetapi menolak memberikan akses karena hak akses tidak cukup.
    * b. Server tidak tahu siapa kamu (Belum login).
    * c. Halaman tidak ditemukan.
    * d. Server sedang rusak.
    * e. Password salah.

5.  **Analogi:** Jika AuthN adalah "Paspor", maka AuthZ adalah...
    * a. Foto di dalam paspor.
    * b. Visa yang tertempel di paspor (menentukan negara mana yang boleh dimasuki dan berapa lama).
    * c. Petugas imigrasi.
    * d. Pesawat terbang.
    * e. Koper bagasi.

### Kunci Jawaban
1.  **b** (User dikenal, tapi hak aksesnya dibatasi -> Isu Otorisasi).
2.  **b** (Efisiensi manajemen adalah keunggulan utama RBAC).
3.  **b** (PIN digunakan untuk membuktikan identitas pemilik kartu).
4.  **a** (Perbedaan klasik antara 401 Unauthorized dan 403 Forbidden).
5.  **b** (Visa adalah izin spesifik yang diberikan kepada pemegang identitas/paspor).

---

## ðŸš€ Mini Challenge
**Audit Aplikasi Kantor/Kampus:**
Coba ingat aplikasi yang sering kamu pakai (misal: Portal Akademik atau Slack/Discord).
1.  Apakah kamu bisa melihat menu "Admin Settings" atau "Input Nilai"? Kemungkinan besar tidak.
2.  Bayangkan jika kamu seorang developer: Di mana kamu menyimpan logika "Sembunyikan Menu Admin" ini?
    * Apakah di *Frontend* saja? (Hanya menyembunyikan tombol).
    * Atau di *Backend* juga? (API menolak request `/admin` meskipun dipanggil paksa).
    * *Tips:* Keamanan sejati harus ada di Backend (AuthZ). Menyembunyikan tombol di Frontend hanyalah kosmetik.