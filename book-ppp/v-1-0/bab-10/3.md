# ğŸ“˜ SUB-BAB 10.3: SKALABILITAS DATA: POLYGLOT PERSISTENCE & NOSQL MODELS

## ğŸ¯ Tujuan Pembelajaran
Setelah mempelajari sub-bab ini, kamu akan mampu:
1.  Mendefinisikan konsep **Polyglot Persistence** (Arsitektur Hibrida) dalam desain sistem modern.
2.  Memilih jenis database yang tepat untuk kasus penggunaan spesifik: **SQL** untuk transaksi vs **NoSQL** untuk data tidak terstruktur/log.
3.  Membedakan penggunaan **SQLite** dan **Key-Value Store** pada penyimpanan sisi *client* (lokal).

---

## ğŸ”— Context & Hook
Bayangkan kamu adalah seorang tukang bangunan. Apakah kamu akan menggunakan palu untuk memasang semua hal, termasuk kaca jendela dan pipa air? Tentu tidak. Kamu akan menggunakan obeng untuk sekrup, kunci inggris untuk pipa, dan palu untuk paku.

Dalam dunia *software engineering*, kesalahan umum pemula adalah mencoba memaksakan satu jenis database (biasanya SQL) untuk menyimpan *segala hal*. Akibatnya? Sistem menjadi lambat saat menangani data yang bentuknya aneh-aneh (seperti log chat atau *session* user). Solusinya adalah tidak fanatik pada satu database, melainkan menggunakan kombinasi alat terbaik. Inilah seni **Polyglot Persistence**.

---

## ğŸ’¡ Analogi: Tim Sepak Bola
Bayangkan sebuah **Tim Sepak Bola**:
* **Kiper (SQL):** Tugasnya sangat spesifik, aturannya ketat (tidak boleh lewat garis gawang sembarangan), dan harus sangat aman menjaga gawang (Integritas Data).
* **Penyerang Sayap (NoSQL):** Tugasnya berlari cepat, fleksibel, posisinya bisa berubah-ubah tergantung situasi serangan (Skema Fleksibel), dan fokus pada mencetak skor sebanyak mungkin (Throughput Tinggi/Scalability).

Sebuah tim yang hebat (Aplikasi Modern) membutuhkan **kombinasi** keduanya. Jika semua pemain adalah Kiper, tim tidak akan pernah mencetak gol (Aplikasi lambat/kaku). Jika semua pemain adalah Penyerang, gawang akan kebobolan terus (Data tidak konsisten).

---

## ğŸ“š Inti Materi

### 1. Apa itu Polyglot Persistence?
Polyglot Persistence adalah strategi arsitektur di mana aplikasi menggunakan beberapa jenis teknologi penyimpanan data yang berbeda secara bersamaan untuk memenuhi kebutuhan yang bervariasi.
* Daripada memaksakan "One Size Fits All", developer memilih alat yang paling efisien untuk setiap fitur.

### 2. Strategi Pembagian di Sisi Server
Dalam arsitektur hibrida ini, pembagian tugas biasanya seperti berikut:
* **SQL (Relasional):** Digunakan untuk data transaksi inti yang tidak boleh salah.
    * *Contoh:* Data pembayaran, inventaris stok, relasi pengguna.
* **NoSQL (Non-Relasional):** Digunakan untuk data yang bervolume besar, tidak terstruktur, atau butuh kecepatan ekstrem.
    * *Contoh:* Log aktivitas server, feed media sosial, data sensor IoT, atau *caching* cepat.

### 3. Strategi Pembagian di Sisi Client (Lokal)
Konsep ini juga berlaku di penyimpanan lokal pada HP atau Browser:
* **SQLite (Relasional):** Digunakan jika data lokal butuh struktur kompleks dan *query* pencarian yang rumit.
    * *Contoh:* Menyimpan ribuan *chat history* yang bisa dicari kata kuncinya.
* **Key-Value Store (NoSQL Sederhana):** Digunakan untuk data pengaturan sederhana yang aksesnya cepat.
    * *Contoh:* Menyimpan preferensi "Dark Mode", token login, atau *flag* "sudah melihat tutorial".

---

## ğŸ“± Contoh Penerapan: Aplikasi Streaming Musik
Mari bedah arsitektur data Spotify/YouTube Music (Hipotetis):

1.  **Data Langganan Premium (SQL):** Apakah user sudah bayar bulan ini? Disimpan di SQL karena butuh akurasi ACID.
2.  **Playlist Lagu (NoSQL - Document):** Struktur playlist bisa berubah-ubah. Disimpan di NoSQL agar fleksibel.
3.  **Rekomendasi/History (NoSQL - Graph/Column):** Data log lagu apa yang didengar jutaan user detik ini. Disimpan di NoSQL karena butuh *scalability* horizontal masif.
4.  **Lokal di HP:**
    * *Lagu Offline:* File sistem (bukan database).
    * *Metadata Lagu Offline:* SQLite (agar bisa di-*search*).
    * *Setting Volume:* Key-Value Store.

---

## ğŸ“– Mini-Glossary
* **Polyglot Persistence:** Praktik menggunakan berbagai teknologi penyimpanan data dalam satu sistem aplikasi.
* **Key-Value Store:** Jenis database NoSQL paling sederhana yang menyimpan data sebagai pasangan Kunci-Nilai (contoh: `theme = dark`), sangat cepat untuk *lookup*.
* **Scalability Horizontal:** Meningkatkan kapasitas sistem dengan menambahkan lebih banyak server (cocok untuk NoSQL), beda dengan Vertikal (menambah RAM satu server).

---

## ğŸ“ Evaluasi Singkat

### 5 Soal Pilihan Ganda (HOTS)

1.  **Skenario:** Kamu sedang membangun fitur "Keranjang Belanja Sementara" (Cart) yang harus super cepat. Data keranjang ini belum tentu jadi dibeli, dan isinya sering berubah. Database server apa yang paling efisien untuk menampung *temporary state* ini dalam konsep Polyglot Persistence?
    * a. SQL Server yang berat.
    * b. Key-Value Store (seperti Redis) untuk akses in-memory cepat.
    * c. Flat File CSV.
    * d. Blockchain.
    * e. SQLite di server.

2.  **Analisis:** Mengapa SQLite lebih disukai daripada Key-Value Store sederhana untuk menyimpan "Daftar Kontak" di HP?
    * a. Karena SQLite lebih cepat menulis data.
    * b. Karena SQLite memungkinkan query kompleks seperti "Cari kontak yang namanya berawalan 'Budi' dan tinggal di 'Jakarta'".
    * c. Karena Key-Value Store tidak bisa menyimpan teks.
    * d. Karena SQLite tidak memakan memori.
    * e. Karena Google memaksa demikian.

3.  **Definisi:** Apa keuntungan utama menerapkan *Polyglot Persistence* dibandingkan menggunakan satu database Monolitik?
    * a. Biaya lisensi lebih murah.
    * b. Kode program jadi lebih sedikit.
    * c. Setiap komponen sistem mendapatkan performa optimal sesuai karakteristik datanya (efisiensi spesifik).
    * d. Tidak perlu backup data.
    * e. Developer hanya perlu belajar satu bahasa query.

4.  **Identifikasi:** Dalam arsitektur hibrida, manakah data yang paling **TIDAK** cocok disimpan di NoSQL?
    * a. Log error server.
    * b. Data sensor suhu IoT.
    * c. Saldo rekening nasabah bank utama.
    * d. Komentar di postingan blog.
    * e. Cache gambar profil.

5.  **Studi Kasus:** Sebuah aplikasi berita menggunakan SQL untuk menyimpan artikel wartawan (agar rapi) dan NoSQL untuk menyimpan *counter* "Jumlah Pembaca" yang naik ribuan kali per detik. Apa alasan pemisahan ini?
    * a. Artikel butuh struktur, Counter butuh *write-speed* tinggi (scalability).
    * b. SQL tidak bisa menyimpan angka.
    * c. NoSQL lebih aman dari hacker.
    * d. Artikel wartawan tidak penting.
    * e. Agar database SQL tidak penuh.

### Kunci Jawaban
1.  **b** (Key-Value/Redis ideal untuk data sesi/keranjang sementara yang cepat).
2.  **b** (Kelebihan utama SQL/SQLite adalah kemampuan query relasional/kompleks).
3.  **c** (Mengoptimalkan setiap bagian dengan alat yang tepat).
4.  **c** (Saldo bank butuh jaminan ACID ketat yang dimiliki SQL).
5.  **a** (Menggabungkan kebutuhan integritas konten dengan kebutuhan kecepatan log statistik).

---

## ğŸš€ Mini Challenge
**Audit Aplikasi HP-mu:**
Buka menu **Settings (Pengaturan)** di HP Android/iOS-mu, lalu cari daftar aplikasi. Pilih satu aplikasi besar (misal: Instagram atau Gojek).
Lihat bagian **Storage (Penyimpanan)**. Di sana biasanya ada dua angka: **App Size** dan **Data/Documents**.
1.  Jika kamu menekan "Clear Cache", data apa yang hilang? (Petunjuk: Ini biasanya data NoSQL/File sementara).
2.  Jika kamu menekan "Clear Data", kamu harus login ulang. Mengapa? (Petunjuk: Token sesi di Key-Value/SQLite lokal terhapus).