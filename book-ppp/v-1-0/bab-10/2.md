# ğŸ“˜ SUB-BAB 10.2: MODEL DATA: SQL VS. NOSQL DAN INTEGRITAS ACID

## ğŸ¯ Tujuan Pembelajaran
Setelah mempelajari sub-bab ini, kamu akan mampu:
1.  Membedakan karakteristik arsitektural antara database **Relasional (SQL)** dan **Non-Relasional (NoSQL)**.
2.  Menjelaskan konsep **Transaksi ACID** dan mengapa properti Atomicity sangat vital untuk integritas data.
3.  Menganalisis situasi kapan harus memilih SQL (integritas tinggi) dan kapan memilih NoSQL (fleksibilitas & skalabilitas).

---

## ğŸ”— Context & Hook
Bayangkan dua skenario ini:
1.  Kamu mentransfer uang Rp1.000.000 ke temanmu. Saldomu berkurang, tapi server *crash* sebelum saldo temanmu bertambah. Uang hilang entah ke mana.
2.  Kamu memposting foto di Instagram. Temanmu di sebelahnya baru melihat foto itu muncul di *feed*-nya 5 detik kemudian.

Skenario pertama adalah **bencana fatal**. Skenario kedua hanyalah **ketidaknyamanan kecil**.
Mengapa pendekatannya berbeda? Karena tidak semua data diciptakan sama. Di sinilah kamu harus memilih antara ketegasan **SQL (ACID)** untuk keamanan finansial, atau kecepatan **NoSQL** untuk skala media sosial.

---

## ğŸ’¡ Analogi: Formulir Resmi vs. Papan Mading
* **SQL (Relasional):** Seperti **Formulir Pendaftaran KTP**.
    Kotaknya sudah pasti (Nama, NIK, Tgl Lahir). Kamu tidak bisa seenaknya menambah kolom "Hobi" atau "Makanan Favorit" di situ. Strukturnya kaku, tapi sangat rapi dan mudah dicek kebenarannya.
* **NoSQL (Non-Relasional):** Seperti **Papan Mading Sekolah**.
    Kamu bisa menempel poster, kertas kecil, foto, atau brosur dengan ukuran bebas. Sangat fleksibel dan bisa menampung banyak jenis informasi dengan cepat, tapi bisa jadi berantakan jika tidak diatur.
* **Transaksi ACID:** Seperti **Vending Machine**.
    Kamu masukkan uang, tekan tombol. Jika barang macet, uang **wajib** keluar kembali. Tidak boleh ada kondisi "uang tertelan tapi barang tidak keluar". Semua (sukses) atau tidak sama sekali (gagal total).

---

## ğŸ“š Inti Materi

### 1. Relasional (SQL): Sang Penjaga Integritas
Database SQL (seperti MySQL, PostgreSQL, SQLite) menyimpan data dalam **tabel**, **baris**, dan **skema** yang kaku.
* **Karakteristik:** Struktur data harus didefinisikan di awal.
* **Kekuatan Utama:** Menjamin integritas data melalui konsep **Transaksi ACID**.
* **Penggunaan:** Ideal untuk data yang memiliki hubungan kompleks dan membutuhkan keakuratan 100%, seperti transaksi keuangan.

### 2. Transaksi ACID
ACID adalah 4 pilar keamanan data di SQL:
* **Atomicity (Atomisitas):** Transaksi harus **berhasil semua atau gagal semua**. Jika sistem *crash* di tengah jalan, seluruh perubahan dibatalkan (rollback).
* **Consistency:** Data harus selalu valid sesuai aturan database.
* **Isolation:** Transaksi yang berjalan bersamaan tidak boleh saling mengganggu.
* **Durability:** Sekali data tersimpan, ia akan tetap ada meski listrik mati.

### 3. Non-Relasional (NoSQL): Sang Penguasa Skala
NoSQL (seperti MongoDB, Redis, Cassandra) dirancang untuk fleksibilitas dan kecepatan.
* **Karakteristik:** Skema fleksibel (tidak butuh tabel kaku). Bisa menyimpan dokumen JSON, Key-Value, atau Graf.
* **Trade-off (Konsep BASE):** Demi mencapai kecepatan tinggi dan *scalability* (kemampuan menangani jutaan user), NoSQL sering kali melonggarkan aturan **Isolation** dan **Consistency**. Data mungkin tidak *real-time* konsisten di semua server (Eventually Consistent), tapi sistem tidak akan *down*.
* **Penggunaan:** Log aktivitas, *feed* media sosial, *caching* data cepat.

---

## ğŸ“± Contoh Penerapan: Aplikasi Ojek Online
Dalam satu aplikasi "Super App", kedua model sering dipakai bersamaan (**Polyglot Persistence**):
1.  **Saldo GoPay/OVO (SQL):** Menggunakan SQL dengan ACID. Tidak boleh ada satu rupiah pun yang selisih saat top-up atau pembayaran.
2.  **Posisi Driver di Peta (NoSQL):** Menggunakan NoSQL. Jika posisi driver telat update 2 detik, tidak masalah fatal. Yang penting sistem bisa menangani jutaan update lokasi driver secara bersamaan dengan cepat.

---

## ğŸ“– Mini-Glossary
* **ACID:** Standar integritas database (Atomicity, Consistency, Isolation, Durability).
* **Atomicity:** Properti yang menjamin transaksi bersifat "All or Nothing".
* **BASE:** Filosofi desain NoSQL (*Basically Available, Soft state, Eventually consistent*) yang mengutamakan ketersediaan daripada konsistensi instan.
* **Schema (Skema):** Struktur atau rancangan database yang mendefinisikan tipe data apa saja yang boleh disimpan.

---

## ğŸ“ Evaluasi Singkat

### 5 Soal Pilihan Ganda (HOTS)

1.  **Kasus:** Sebuah startup membuat game RPG. Mereka butuh menyimpan data "Inventory Pemain" yang isinya bisa berubah-ubah (kadang bawa pedang, kadang cuma bawa ramuan, kadang bawa item event baru). Struktur datanya sangat dinamis. Database apa yang paling cocok?
    * a. SQL karena butuh ACID.
    * b. NoSQL (Document Store) karena skemanya fleksibel.
    * c. SQLite karena ini game mobile.
    * d. File Excel.
    * e. Block Storage.

2.  **Analisis:** Mengapa sistem perbankan jarang menggunakan NoSQL murni untuk mencatat buku besar (ledger) transaksi utama?
    * a. Karena NoSQL terlalu mahal.
    * b. Karena NoSQL sering mengorbankan properti Isolation dan Consistency demi kecepatan, yang berisiko bagi data keuangan.
    * c. Karena SQL lebih mudah dipelajari.
    * d. Karena NoSQL tidak bisa menyimpan angka.
    * e. Karena bank tidak butuh *scalability*.

3.  **Konsep:** Dalam transaksi transfer uang: (1) Kurangi Saldo A, (2) Tambah Saldo B. Jika langkah (1) sukses tapi langkah (2) gagal karena server mati, database secara otomatis membatalkan langkah (1) sehingga saldo A kembali utuh. Prinsip apa ini?
    * a. Durability.
    * b. Consistency.
    * c. Atomicity.
    * d. Scalability.
    * e. Latency.

4.  **Trade-off:** Apa yang dikorbankan oleh database NoSQL (model BASE) untuk mencapai *throughput* (kecepatan pemrosesan) yang sangat tinggi?
    * a. Kapasitas penyimpanan.
    * b. Ketersediaan (Availability).
    * c. Jaminan Konsistensi data yang ketat dan instan (Immediate Consistency).
    * d. Kemampuan menyimpan teks.
    * e. Keamanan password.

5.  **Identifikasi:** Manakah pasangan penggunaan yang paling tepat berdasarkan karakteristiknya?
    * a. SQL untuk Log Sensor IoT, NoSQL untuk Saldo Bank.
    * b. SQL untuk Transaksi E-Commerce, NoSQL untuk Analisis Klik Pengguna (Analytics).
    * c. SQL untuk Caching Gambar, NoSQL untuk Data Karyawan.
    * d. SQL untuk Video Streaming, NoSQL untuk Transfer Uang.
    * e. SQL hanya untuk Offline, NoSQL hanya untuk Online.

### Kunci Jawaban
1.  **b** (NoSQL ideal untuk data tidak terstruktur/berubah-ubah seperti item game).
2.  **b** (Keuangan butuh jaminan ACID ketat yang sering dilonggarkan di NoSQL).
3.  **c** (Atomicity menjamin sukses semua atau gagal semua).
4.  **c** (BASE mengorbankan konsistensi instan demi *availability/speed*).
5.  **b** (SQL untuk transaksi penting, NoSQL untuk data bervolume besar/analitik).

---

## ğŸš€ Mini Challenge
**Simulasi Arsitek:**
Bayangkan kamu sedang mendesain sistem untuk **Aplikasi Voting Pemilu Online**.
1.  Bagian mana yang WAJIB menggunakan SQL/ACID? (Petunjuk: Penghitungan suara final).
2.  Bagian mana yang BISA menggunakan NoSQL? (Petunjuk: Komentar netizen di halaman live count).
3.  Apa risiko jika penghitungan suara menggunakan sistem yang "Eventually Consistent" (konsistensi tertunda)?