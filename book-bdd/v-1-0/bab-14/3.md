# ğŸ“˜ SUB-BAB 14.3: REVOLUSI SERVERLESS & AUTO-SCALING

## ğŸ¯ Tujuan Pembelajaran
Setelah mempelajari sub-bab ini, kamu akan mampu:
1.  Mendefinisikan konsep **Serverless Database** dan bagaimana ia mengubah model ekonomi infrastruktur.
2.  Menjelaskan mekanisme **Auto-Scaling** dalam mengatasi masalah klasik *Over-provisioning* dan *Under-provisioning*.
3.  Menganalisis trade-off antara fleksibilitas Serverless dengan variabilitas biaya yang mungkin terjadi.

---

## ğŸ”— Context & Hook
Bayangkan kamu membuka sebuah restoran. Masalah terbesarmu adalah menentukan jumlah meja.
* Jika kamu beli 100 meja tapi pelanggan cuma 5 orang, kamu rugi bayar sewa tempat (**Over-provisioning**).
* Jika kamu beli 5 meja tapi pelanggan datang 100 orang, pelanggan marah dan pergi (**Under-provisioning**).

Dulu, Arsitek Database harus menjadi "dukun" yang menebak berapa besar server yang dibutuhkan untuk tahun depan. Tebakan salah = Bencana.

Kini hadir **Serverless Database**. Bayangkan restoran ajaib yang mejanya bisa muncul sendiri saat pelanggan datang, dan menghilang saat pelanggan pergi. Kamu tidak membayar sewa gedung, kamu hanya membayar **per piring** yang dimakan.

---

## ğŸ’¡ Analogi: Tagihan Listrik vs. Genset Pribadi
1.  **Provisioned Cluster (Cara Lama) = Genset Pribadi:**
    Kamu membeli genset 5.000 Watt. Kamu harus beli solar (biaya tetap) setiap hari agar genset nyala 24 jam.
    * Jika kamu hanya nyalakan 1 lampu (10 Watt), genset tetap menyala full. Rugi solar.
    * Jika kamu butuh 6.000 Watt, genset meledak (mati lampu).
2.  **Serverless Database = Listrik PLN (Meteran):**
    Kamu tidak peduli dari mana listriknya. Kamu hanya punya meteran.
    * Jika rumah kosong, tagihan hampir nol.
    * Jika sedang pesta dan nyalakan 10 AC, listrik tetap kuat, tagihan naik hanya untuk jam itu saja.
    * Prinsipnya: **Pay-as-you-go** (Bayar sesuai pemakaian).

---

## ğŸ“š Inti Materi

### 1. Masalah: Dilema Provisioning
Sebelum Serverless, kita harus memilih ukuran instance (misal: M30 atau M40).
* **Over-provisioning:** Membeli server terlalu besar "jaga-jaga" kalau ramai. Akibatnya: Membakar uang untuk resource yang menganggur (idle).
* **Under-provisioning:** Membeli server pas-pasan demi hemat. Akibatnya: Saat trafik naik sedikit saja, aplikasi *crash*.

### 2. Solusi: Serverless Database
Serverless (misal: MongoDB Atlas Serverless) menghilangkan konsep "Instance Size".
* **Tanpa Tipe Instance:** Kamu tidak memilih RAM 8GB atau 16GB. Kamu hanya membuat "Endpoint".
* **Auto-Scaling:** Di balik layar, sistem secara otomatis memonitor beban CPU dan Memori secara *real-time*. Jika beban naik, resource ditambah detik itu juga. Jika beban turun, resource dikurangi hingga nol.

### 3. Model Biaya: Pay-as-you-go
Kamu ditagih berdasarkan **Read Processing Unit (RPU)** dan storage yang dipakai.
* **Cocok untuk:** Aplikasi dengan trafik fluktuatif (jarang dipakai, tapi sesekali meledak).
* **Kurang Cocok untuk:** Aplikasi dengan beban tinggi yang konstan 24/7 (biasanya *Reserved Instance* lebih murah untuk kasus ini).

### 4. Trade-off: Hilangnya Kontrol & Prediktabilitas
* **Cost Unpredictability:** Karena tagihan mengikuti trafik, jika tiba-tiba aplikasi viral atau diserang bot, tagihan bulan depan bisa melonjak drastis tanpa peringatan.
* **Cold Start:** Jika database "tidur" (scale to zero), request pertama mungkin sedikit lambat karena mesin harus "dipanaskan" lagi.

---

## ğŸ“± Contoh Penerapan: Aplikasi Tiket Konser
1.  **Hari Biasa:** Tidak ada konser. Trafik website hampir nol.
    * *Serverless:* Scale down ke minimum. Biaya: Rp 50.000/bulan.
    * *Provisioned:* Harus tetap bayar sewa server minimum (misal M10). Biaya: Rp 1.000.000/bulan.
2.  **Hari Penjualan Tiket (War Ticket):** Jam 10.00 pagi, 1 juta orang menyerbu.
    * *Serverless:* Otomatis *scale-out* menampung 1 juta user. Transaksi lancar. Biaya melonjak untuk 1 jam itu saja.
    * *Provisioned:* Server M10 langsung meledak. *Down*. Tiket gagal terjual.

---

## ğŸ“– Mini-Glossary
* **Serverless:** Model eksekusi cloud di mana penyedia cloud mengelola alokasi sumber daya secara dinamis; pengguna tidak mengelola server fisik/virtual.
* **Auto-Scaling:** Kemampuan sistem untuk secara otomatis menyesuaikan jumlah sumber daya komputasi berdasarkan beban kerja saat ini.
* **Over-provisioning:** Mengalokasikan sumber daya lebih banyak dari yang dibutuhkan, menyebabkan pemborosan biaya.
* **Pay-as-you-go:** Model pembayaran di mana pengguna hanya ditagih berdasarkan konsumsi sumber daya yang sebenarnya.

---

## ğŸ“ Evaluasi Singkat

### 5 Soal Pilihan Ganda (HOTS)

1.  **Analisis:** Mengapa Serverless Database dianggap solusi terbaik untuk lingkungan *Development* atau *Testing*?
    * a. Karena lebih cepat.
    * b. Karena di lingkungan Dev/Test, database seringkali *idle* (tidak dipakai) di malam hari atau akhir pekan; Serverless akan *scale down* ke nol sehingga biayanya sangat murah dibandingkan server *provisioned* yang bayar 24/7.
    * c. Karena fiturnya lebih lengkap.
    * d. Karena developer malas setup server.
    * e. Karena Serverless tidak butuh password.

2.  **Skenario:** Sebuah startup berita meluncurkan aplikasi. Trafik biasanya sepi, tapi saat ada *Breaking News*, trafik melonjak 100x lipat dalam 5 menit. Mengapa model *Provisioned* (IaaS) tradisional berisiko tinggi di sini?
    * a. Karena server provisioned mahal.
    * b. Karena sulit memprediksi kapan *Breaking News* terjadi; jika server kecil (Under-provisioning), aplikasi akan *crash* saat momen penting. Jika server besar (Over-provisioning), startup bangkrut bayar server nganggur.
    * c. Karena berita teks memakan banyak disk.
    * d. Karena IaaS tidak aman.
    * e. Karena wartawan butuh database cepat.

3.  **Konsep:** Apa yang dimaksud dengan *Auto-Scaling* dalam konteks Serverless?
    * a. Database otomatis melakukan backup.
    * b. Database otomatis menghapus data lama.
    * c. Sistem secara dinamis menambah atau mengurangi CPU/RAM/Storage berdasarkan permintaan aplikasi secara *real-time* tanpa intervensi manusia.
    * d. Sistem otomatis mengirim email ke admin.
    * e. Database otomatis restart setiap jam.

4.  **Trade-off:** Apa risiko finansial utama yang harus diwaspadai Arsitek saat memilih Serverless Database untuk aplikasi dengan trafik tinggi yang konstan (stabil 24 jam)?
    * a. Biaya bisa menjadi jauh lebih mahal dibandingkan membeli *Reserved Instance* (Sewa Tetap) karena biaya per-unit di Serverless biasanya ada premiumnya.
    * b. Serverless gratis.
    * c. Serverless tidak bisa menangani trafik tinggi.
    * d. Tidak ada risiko.
    * e. Serverless sering diskon.

5.  **Identifikasi:** Manakah di bawah ini yang merupakan karakteristik unik dari Serverless Database?
    * a. Anda harus memilih ukuran RAM (misal 8GB).
    * b. Anda harus menginstall OS Linux.
    * c. Anda tidak perlu memilih ukuran instance; kapasitas menyesuaikan beban secara elastis.
    * d. Anda harus mengatur replikasi manual.
    * e. Anda harus membayar biaya tetap bulanan yang sama.

### Kunci Jawaban
1.  **b** (Efisiensi biaya untuk resource yang sering idle).
2.  **b** (Masalah ketidakpastian beban kerja/unpredictable workload).
3.  **c** (Definisi inti elastisitas cloud).
4.  **a** (Serverless ideal untuk *spiky traffic*, bukan *predictable constant traffic*).
5.  **c** (Abstraksi penuh terhadap resource hardware).

---

## ğŸš€ Mini Challenge
**Kalkulator Hemat:**
Aplikasi "Absensi Karyawan" hanya dipakai jam 08.00-09.00 dan 17.00-18.00 (Total 2 jam/hari). Sisa 22 jam nganggur.
1.  **Opsi A (Provisioned):** Sewa server Rp 1.000/jam x 24 jam = Rp 24.000/hari.
2.  **Opsi B (Serverless):** Biaya Rp 2.000/jam (lebih mahal per unit), tapi hanya bayar saat dipakai.
    * Hitung: Rp 2.000 x 2 jam = Rp 4.000/hari.
    * Sisa 22 jam = Rp 0.
3.  Berapa penghematannya? (Rp 20.000 per hari atau hemat ~83%!).

---
*Mesin sudah berjalan otomatis. Lalu, apa tugasmu sekarang? Apakah Arsitek Data jadi pengangguran? Tidak. Ketik **"Lanjut"** untuk masuk ke **Sub-Bab 14.4: Tanggung Jawab Baru: Apa yang Tidak Diurus Cloud?**.*