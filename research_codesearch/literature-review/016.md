---
title: Review Paper - MM-SCS Memanfaatkan Fitur Multimodal untuk Peningkatan Code Search Smart Contract
description: Rangkuman paper tentang Model Code Search Multimodal untuk Smart Contract (IEEE TRANSACTIONS ON SOFTWARE ENGINEERING, 2025).
head:
  - - meta
    - name: keywords
      content: Code search, smart contract, attention mechanism, graph representation, Solidity
---

# 016 - MM-SCS: Leveraging Multimodal Features to Enhance Smart Contract Code Search
[https://doi.org/10.1109/TSE.2025.3531692]

**Penulis:** **Chaochen Shi** ᵃ*, **Yong Xiang** ᵇ, **Jiangshan Yu** ᶜ, **Longxiang Gao** ᵈ

**Afiliasi:**
* ᵃ Chongqing University of Posts and Telecommunications, Chongqing 400065, China
* ᵇ Deakin University, Melbourne, VIC 3125, Australia
* ᶜ The University of Sydney, Sydney, NSW 2050, Australia
* ᵈ Qilu University of Technology, Jinan 250353, China

**Kronologi:** Received: 23 March 2024 • Revised: 4 January 2025 • Accepted: 9 January 2025 • Available Online: 27 January 2025

<a href="https://www.scimagojr.com/journalsearch.php?q=18711&tip=sid" target="_blank"><img src="https://www.scimagojr.com/journal_img.php?id=18711" alt="SCImago Journal & Country Rank" /></a>

| Resume Eksekutif |
| :--- |
| **Publikasi:**<br>• **Jurnal:** IEEE TRANSACTIONS ON SOFTWARE ENGINEERING, Vol. 51, No. 2, pp. 638–649 (Feb 2025)<br>• **Topik:** Peningkatan *Semantic Code Search* secara khusus untuk *Smart Contract* (Solidity) menggunakan pendekatan Multimodal.<br><br>**Masalah & Solusi:**<br>• **Masalah:** Model *code search* yang ada memiliki **kesenjangan semantik** (*semantic gap*) antara kode dan kueri, serta kinerja yang buruk pada kueri khusus *smart contract*. Model *DeepCS-based* yang dominan sulit menangkap **ketergantungan mendalam** (*deep dependency*) antara elemen kunci kode (aliran kontrol/data) dan membutuhkan **korpus pelatihan yang besar** (tidak tersedia untuk Solidity).<br>• **Solusi:** Mengusulkan **MM-SCS** (*Multi-Modal Smart contract Code Search*). MM-SCS mengatasi masalah ini dengan: (1) Menambahkan modalitas ekstra berupa **Contract Elements Dependency Graph (CEDG)** untuk menangkap aliran kontrol dan data spesifik Solidity. (2) Menggunakan mekanisme *embedding* **multi-head attention** untuk fitur kode tekstual. (3) Menggunakan model *pretrained* **ALBERT** yang di-*fine-tune* sebagai *encoder* kueri untuk kinerja optimal meskipun data pelatihan terbatas.<br><br>**Contoh Penerapan:**<br>• **Code Search Smart Contract:** Model dilatih dan diuji pada set data Solidity *smart contract* yang baru dikumpulkan (48K pasangan (kode, *docstring*) unik).<br>• **Kinerja Unggul:** MM-SCS mencapai MRR **0.572**, melampaui SOTA sebelumnya (UNIF, DeepCS, CARLCS-CNN, TAB-CS) masing-masing sebesar $\mathbf{34.2\%}$, $\mathbf{59.3\%}$, $\mathbf{36.8\%}$, dan $\mathbf{14.1\%}$.<br><br>**Metodologi:**<br>• **CEDG (Modalitas Ekstra):** Grafik khusus Solidity yang mengintegrasikan aliran kontrol (*Control-flow*), aliran data (*Data-flow*), dan hubungan *fallback*. CEDG hanya berfokus pada hubungan antar elemen kunci (Invocation, Variable, Fallback nodes), menjadikannya lebih efisien daripada AST atau *code property graph*.<br>• **Code Embedding:** Menggabungkan empat modalitas: (1) **Teks** (Token Kode, Nama Fungsi, Urutan API) yang di-*embed* menggunakan jaringan **Multi-head Self-Attention**; dan (2) **CEDG** yang di-*embed* menggunakan **Modified Graph Attention Network (GAT)** untuk menangkap fitur node dan *edge* (relasi).<br>• **Query Embedding:** Menggunakan model *pretrained* **ALBERT** yang telah di-*fine-tune* secara inkremental pada *docstring* korpus untuk memahami istilah dan konteks *blockchain* secara mendalam.<br>• **Training:** Menggunakan arsitektur *pseudo-siamese network* untuk memetakan *code embedding* ($v_c$) dan *docstring embedding* ($v_d$) ke ruang vektor bersama, meminimalkan *Margin Loss* dengan *negative sampling*.<br><br>**Temuan Kunci:**<br>1. **Kinerja SOTA:** MM-SCS mengungguli semua *baseline* pada MRR dan SR@k, menunjukkan keefektifan pendekatan multimodal.<br>2. **Kontribusi CEDG:** Modalitas CEDG secara signifikan meningkatkan kinerja MM-SCS sebesar **23.8% MRR** (dibandingkan hanya T+A+F), dan $\mathbf{0.8s}$ lebih cepat per kueri dibandingkan modalitas AST.<br>3. **Keunggulan ALBERT:** ALBERT yang di-*fine-tune* adalah mekanisme *query embedding* terbaik, sangat penting untuk memahami kueri yang menggunakan sinonim spesifik *blockchain* (misalnya, "destroy tokens" $\approx$ "burn tokens").<br><br>**Kontribusi Utama:**<br>• Mengusulkan model **MM-SCS** yang didedikasikan untuk *semantic code search* *smart contract*.<br>• Memperkenalkan **Contract Elements Dependency Graph (CEDG)** sebagai modalitas ekstra untuk menangkap struktur dan ketergantungan kode spesifik Solidity.<br>• Membangun dan merilis korpus *smart contract* Solidity (470K mentah, 48K unik) untuk memajukan penelitian di domain ini.<br><br>**Dampak:**<br>• Mempercepat efisiensi pengembang *smart contract* (tingkat *code reuse* >79%) dengan menyediakan alat *code search* semantik yang akurat dan relevan, mengatasi kesenjangan semantik yang ada. |

## 1. Pendahuluan & Masalah

*Smart contract* adalah protokol digital yang berjalan otomatis di *blockchain*. Dengan tingkat penggunaan ulang kode (*code reuse*) yang dilaporkan mencapai lebih dari 79%, pengembang *smart contract* memiliki kebutuhan yang besar akan alat *semantic code search* yang efisien. *Semantic code search* memungkinkan pengembang menemukan potongan kode yang relevan menggunakan kueri bahasa alami.

Namun, model *code search* yang ada, yang sebagian besar dirancang untuk bahasa pemrograman *general-purpose* (seperti DeepCS dan turunannya), menghadapi dua tantangan utama:
1.  **Kesenjangan Semantik & Kurangnya Ketergantungan Struktural:** Model yang ada gagal menangkap **ketergantungan mendalam** antara elemen kunci kode (seperti aliran kontrol dan aliran data). Fitur tekstual saja (*tokens*, *API sequences*) tidak cukup untuk semantik kode yang kompleks, terutama dalam konteks *smart contract* Solidity yang memiliki fitur unik (misalnya, fungsi *fallback* dan manajemen *gas*).
2.  **Keterbatasan Data Pelatihan:** Model *neural code search* yang sukses membutuhkan **korpus (kode, kueri) berukuran besar** (seperti CodeSearchNet), yang saat ini tidak tersedia untuk bahasa Solidity. Hal ini membatasi penerapan model *state-of-the-art* dalam aplikasi *blockchain*.

::: tip Solusi yang Diusulkan
Kami mengusulkan **MM-SCS** (*Multi-Modal Smart contract Code Search*), sebuah model yang didedikasikan untuk *smart contract code search* Solidity. MM-SCS menggabungkan: (1) **Contract Elements Dependency Graph (CEDG)** sebagai modalitas grafis ekstra untuk menangkap aliran kontrol/data spesifik kontrak; (2) Mekanisme *embedding* **Multi-head Attention** untuk fitur kode tekstual; dan (3) Model *pretrained* **ALBERT** yang di-*fine-tune* untuk *query embedding* yang kuat, mengatasi keterbatasan data pelatihan.
:::

## 2. Metodologi

MM-SCS dibangun di atas arsitektur *pseudo-siamese network* (Gambar 1), di mana *code embedding* ($v_c$) dan *query embedding* ($v_q$ atau $v_d$) dipetakan ke ruang vektor bersama, dan kesamaan semantik diukur menggunakan **Cosine Similarity**.

### A. Proposed Contract Elements Dependency Graph (CEDG)

CEDG adalah modalitas tambahan, sebuah grafik simbolik yang dirancang khusus untuk kode Solidity, lebih sederhana dan lebih fokus pada semantik utama daripada AST atau *code property graph*.

1.  **Node Representation:** Elemen kontrak diklasifikasikan menjadi tiga kategori: **Invocation Nodes** (fungsi dan pemanggilan sistem), **Variable Nodes** (variabel dan variabel sistem seperti `msg.sender`), dan **Fallback Nodes** (mewakili fungsi *fallback* Solidity yang unik). Atribut node mencakup \[Category, Type, Name].
2.  **Edge Representation:** Sebelas jenis *edge* didefinisikan untuk merepresentasikan tiga hubungan utama:
    *   **Control-flow Edges:** Merepresentasikan pernyataan kondisional, *loop*, dan blok kode (misalnya, `IF`, `WH`, `BS`/`BE`).
    *   **Data-flow Edges:** Merepresentasikan penggunaan variabel (misalnya, operasi *assign* `AS` atau *access* `AC`).
    *   **Fallback Edges:** Merepresentasikan hubungan antara *Fallback Nodes* dan *Invocation Nodes* yang mungkin memicu fungsi *fallback*.

### B. Code Embedding

*Code embedding* ($v_c$) adalah hasil konkatenasi dari *embedding* multimodal: $M=v_{T}\oplus v_{F}\oplus v_{A}\oplus v_{G}$, yang kemudian dilewatkan melalui lapisan **LSTM** dan **Dense** untuk menghasilkan $v_{c} \in \mathbb{R}^{d}$.

1.  **Embedding Fitur Tekstual ($v_T, v_F, v_A$):** Tiga fitur tekstual (Token Kode ($T$), Nama Fungsi ($F$), Urutan API ($A$)) di-*embed* menggunakan tiga modul terpisah **Multi-head Self-Attention**. Mekanisme ini menggunakan *Positional Encoding* ($PE$) dan *Multi-head Attention* (Eq. (7) dan (8)) untuk menekankan informasi kontekstual yang relatif penting dan memungkinkan komputasi paralel.
2.  **Embedding CEDG ($v_G$):** CEDG di-*embed* menggunakan **Modified Graph Attention Network (GAT)** [11], yang mampu menangkap fitur *node* dan *edge* (relasi) secara simultan. *Attention weight* $\alpha_{ijk}$ dihitung untuk setiap tripel $(\vec{h_{i}},\vec{h_{j}},\vec{e_{k}})$ (Eq. (12)), dan representasi *node* baru $\vec{h_{i}^{\prime}}$ diperbarui dengan agregasi berbobot *attention* dari tetangga (Eq. (13)).

### C. Query Embedding ($v_d$)

MM-SCS menggunakan model *pretrained* **ALBERT** sebagai *encoder* kueri/docstring. Untuk meningkatkan pemahaman ALBERT terhadap konteks dan terminologi *blockchain* (misalnya, *fallback*, *burn tokens*), model ini di-*fine-tune* secara inkremental menggunakan *docstring* dalam set data pelatihan kami melalui tugas *n-gram masking* dan *sentence order prediction*.

### D. Model Training

Tujuan pelatihan adalah meminimalkan *Loss Value* $L(\theta)$ dengan memaksimalkan kesamaan kosinus antara $v_c$ dan *docstring* positif ($v_d^+$) serta meminimalkan kesamaan kosinus antara $v_c$ dan *docstring* negatif yang dipilih secara acak ($v_d^-$).

$$L(\theta)=\max(0,\beta+\cos(v_{c},v_{d}^{-})-\cos(v_{c},v_{d}^{+}))$$
Di mana $\beta$ adalah *constant margin* (ditetapkan 0.05).

## 3. Detail Pengujian

### Dataset
Korpus Solidity dikumpulkan dari GitHub dan Etherscan.io, menghasilkan 470K pasangan (kode, *docstring*) mentah, dan setelah deduplikasi, tersisa **48K pasangan unik**.

### Baseline
Kami membandingkan MM-SCS dengan empat model SOTA: **UNIF**, **DeepCS**, **CARLCS-CNN**, dan **TAB-CS**.

### Metrik Evaluasi
Kami menggunakan dua metrik utama:

*   **Success Rate@k (SR@k):** Persentase kueri yang berhasil menemukan jawaban standar di antara $k$ hasil teratas ($k=1, 5, 10$).
$$SR@k=\frac{1}{|Q|}\sum_{i=1}^{|Q|}\delta(Q_{i}\le k)$$
*   **Mean Reciprocal Rank (MRR):** Rata-rata dari kebalikan peringkat hasil yang pertama kali ditemukan.
$$MRR=\frac{1}{|Q|}\sum_{i=1}^{|Q|}\frac{1}{Rank_{Q_{i}}}$$

## 4. Hasil Eksperimen

### RQ1: Perbandingan Efektivitas

| Model | SR@1 | SR@5 | SR@10 | MRR |
| :--- | :--- | :--- | :--- | :--- |
| UNIF | 0.417 | 0.514 | 0.567 | 0.426 |
| DeepCS | 0.347 | 0.462 | 0.501 | 0.359 |
| CARLCS-CNN | 0.434 | 0.545 | 0.573 | 0.418 |
| TAB-CS | 0.489 | 0.623 | 0.664 | 0.501 |
| **MM-SCS** | **0.568** | **0.746** | **0.798** | **0.572** |

**Analisis:** MM-SCS mencapai kinerja tertinggi secara signifikan di semua metrik. Peningkatan MRR terbesar adalah terhadap DeepCS ($\mathbf{59.3\%}$) dan CARLCS-CNN ($\mathbf{36.8\%}$). Keunggulan ini terbukti signifikan secara statistik (p-value < 0.05 pada *Wilcoxon signed-rank test*).

### RQ2: Kontribusi Modalitas Input

| Modalitas | SR@1 | MRR | Peningkatan MRR (vs T+A+F) | Testing Speed |
| :--- | :--- | :--- | :--- | :--- |
| T | 0.449 | 0.453 | - | 0.24s/query |
| T+A+F | 0.463 | 0.462 | - | 0.29s/query |
| T+A+F+AST | 0.522 | 0.530 | 14.7% | 0.42s/query |
| **T+A+F+CEDG** | **0.568** | **0.572** | **23.8%** | **0.34s/query** |
| T+A+F+AST+CEDG | 0.573 | 0.581 | 25.8% | 0.56s/query |

**Analisis:**
*   **Modalitas Ekstra:** Penambahan **CEDG** (*T+A+F+CEDG*) meningkatkan MRR sebesar $\mathbf{23.8\%}$ dibandingkan hanya menggunakan fitur tekstual (*T+A+F*). Kinerja ini jauh lebih unggul daripada menggunakan AST sebagai modalitas ekstra (peningkatan $\mathbf{14.7\%}$). Selain itu, CEDG jauh lebih cepat daripada AST.
*   **Mekanisme Embedding:** Ketika modalitas input disamakan (misalnya hanya T), mekanisme *embedding* *Multi-head Attention* MM-SCS mengungguli semua *baseline*, termasuk UNIF.
*   **Query Embedding:** Penggunaan **ALBERT** yang di-*fine-tune* menghasilkan MRR tertinggi $\mathbf{(0.572)}$ dibandingkan mekanisme *embedding* kueri lainnya (seperti *Attention-Based Embedding* SOTA sebelumnya, yang mencapai 0.561), memvalidasi pentingnya pemahaman konteks *blockchain* yang lebih dalam.

### RQ3: Efisiensi Pelatihan dan Operasi

| Model | Training Time | Testing Speed |
| :--- | :--- | :--- |
| UNIF | 0.3 hours | **0.19s/query** |
| DeepCS | 3.8 hours | 1.01s/query |
| TAB-CS | 0.8 hours | 0.45s/query |
| **MM-SCS** | **10.2 hours** | **0.34s/query** |

**Analisis:** Meskipun waktu pelatihan MM-SCS adalah yang terlama (sebagian besar untuk *fine-tuning* ALBERT), kecepatan kueri saat *testing* adalah $\mathbf{0.34s/query}$, hanya sedikit lebih lambat dari UNIF (modalitas tunggal). Kecepatan ini dicapai karena penggunaan *attention mechanism* (komputasi paralel) dan struktur CEDG yang sederhana, dan dianggap dapat diterima untuk skenario aplikasi mesin pencari.

## 5. Kesimpulan

Kami berhasil mengusulkan **MM-SCS**, sebuah model *semantic code search* multimodal yang didedikasikan untuk *smart contract* Solidity. MM-SCS mengatasi kelemahan model *code search* generik dengan memanfaatkan fitur multimodal, termasuk **Contract Elements Dependency Graph (CEDG)**, *Multi-head Attention* untuk fitur tekstual, dan model **ALBERT** yang di-*fine-tune* untuk *query embedding*. MM-SCS menunjukkan kinerja SOTA, melampaui *baseline* hingga $59.3\%$ MRR pada set data Solidity yang baru kami kumpulkan.

::: info Dampak Praktis
MM-SCS secara signifikan meningkatkan akurasi dan relevansi *semantic code search* untuk *smart contract*, terutama dalam memahami terminologi *blockchain* spesifik dan ketergantungan struktural kode yang unik. Hal ini akan secara langsung **meningkatkan produktivitas pengembang** *smart contract* yang sangat bergantung pada penggunaan ulang kode, menyediakan alat yang lebih andal daripada metode pencarian berbasis kata kunci atau tag.
:::