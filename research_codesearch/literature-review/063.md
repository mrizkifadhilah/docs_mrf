---
title: Review Paper - Peningkatan Code Search dengan Anotasi Kode Struktural
description: Rangkuman paper tentang CodeHunter, model Code Search yang memanfaatkan Anotasi Kode Struktural (Electronics, 2022).
head:
  - - meta
    - name: keywords
      content: code search, code annotation, deep neural networks, structural features, AST, Javadoc
---

# 063 - Boosting Code Search with Structural Code Annotation
Tautan (DOI) [https://doi.org/10.3390/electronics11193053]

**Penulis:** **Xianglong Kong** $^{1*}$, **Hongyu Chen** $^{1}$, **Ming Yu** $^{2}$, **Lixiang Zhang** $^{1}$

**Afiliasi:**
* $^{1}$ School of Computer Science and Engineering, Southeast University, Nanjing 211189, China
* $^{2}$ Shenyang Blower Works Group Corporation, Shenyang 110869, China

**Kronologi:** Received: 18 August 2022 • Accepted: 21 September 2022 • Published: 25 September 2022

<a href="https://www.scimagojr.com/journalsearch.php?q=21100829272&tip=sid" target="_blank"><img src="https://www.scimagojr.com/journal_img.php?id=21100829272" alt="SCImago Journal & Country Rank" /></a>

| Resume Eksekutif |
| :--- |
| **Publikasi:**<br>• **Jurnal:** Electronics 11, 19 (2022)<br>• **Topik:** Mengembangkan kerangka *code search* bernama **CodeHunter** yang berfokus pada ekstraksi dan pemanfaatan informasi **Anotasi Kode Struktural** yang kaya untuk meningkatkan efektivitas pencarian.<br><br>**Masalah & Solusi:**<br>• **Masalah:** Metode *code search* saat ini memperlakukan anotasi kode (seperti komentar Javadoc) sebagai bahasa alami biasa, mengabaikan informasi struktural tersembunyi yang terkandung di dalamnya (misalnya, parameter, nilai kembalian, pengecualian). Hal ini menyebabkan hilangnya informasi penting dan representasi kode yang tidak komprehensif.<br>• **Solusi:** Mengusulkan **CodeHunter** yang: (1) Menggunakan **Abstract Syntax Tree (AST)** untuk ekstraksi fitur kode (nama, API, parameter, *return value*); (2) Mengklasifikasikan anotasi Javadoc ke dalam lima kategori struktural; dan (3) Menggabungkan kedua jenis fitur ini menjadi **Anotasi Kode Multidimensi** yang komprehensif untuk pelatihan jaringan *deep embedding*.<br><br>**Contoh Penerapan:**<br>• Diuji pada *dataset* besar **Java** yang terdiri dari lebih dari 7 juta pasangan *query-code* yang dikumpulkan dari 100 proyek Java *open-source* teratas di GitHub.<br>• CodeHunter mencapai akurasi $A@1 = \mathbf{0.43}$, $A@5 = \mathbf{0.78}$, $A@10 = \mathbf{0.89}$, dan MRR $\mathbf{0.56}$ pada *test set*.<br><br>**Metodologi:**<br>• **Ekstraksi Fitur:** Dilakukan dalam dua jalur: (a) **Fitur Kode** (Nama Metode, Parameter, *Return Value*, Urutan API) diekstraksi dari AST menggunakan JDT; (b) **Fitur Anotasi** diekstraksi dari Javadoc berdasarkan klasifikasi: Fungsional, Penggunaan, Struktural, Pengembangan, dan Pengecualian. Anotasi diproses menggunakan NLTK dan *Pos Tagging*.<br>• **Anotasi Multidimensi:** Menggabungkan fitur kode dan fitur anotasi menjadi representasi tunggal yang komprehensif.<br>• **Arsitektur Pencarian:** Menggunakan jaringan **Deep Annotation Embedded Network** dan **Deep Query Embedded Network** untuk memvektorisasi anotasi kode dan kueri pengguna. Hasil pencarian diperoleh melalui perhitungan kesamaan vektor (misalnya, *Cosine Similarity*).<br><br>**Temuan Kunci:**<br>1. **Kinerja Unggul:** CodeHunter menunjukkan kinerja yang signifikan lebih baik daripada *baseline* IR (**Lucene**) dan *baseline* DL SOTA sebelumnya (**DeepCS**) pada semua metrik. Peningkatan rata-rata $5\%$ di atas DeepCS.<br>2. **Kontribusi Fitur:** Keefektifan CodeHunter berasal dari penggunaan **fitur anotasi dan kode berkualitas tinggi** yang komprehensif, bukan hanya informasi fungsional sederhana.<br>3. **Ketahanan Kueri:** Efektivitas CodeHunter tidak terlalu terpengaruh oleh kompleksitas kueri (panjang deskripsi), menunjukkan ketahanan yang baik dalam skenario pencarian praktis.<br><br>**Kontribusi Utama:**<br>• Mengusulkan metode ekstraksi **Anotasi Kode Struktural** baru yang memanfaatkan AST dan mengklasifikasikan anotasi menjadi lima kategori fungsional.<br>• Mengembangkan **CodeHunter**, sebuah mesin *code search* berbasis DL yang menggabungkan fitur kode dan anotasi secara komprehensif untuk representasi multidimensi.<br><br>**Dampak:**<br>• Memberikan solusi yang lebih efektif untuk *code search* dengan mengatasi masalah representasi kode yang tidak lengkap. Ini meningkatkan akurasi hasil pencarian dan pengalaman pengguna, terutama untuk kueri yang lebih kompleks dan beragam. |

## 1. Pendahuluan & Masalah

*Code search* adalah teknik vital untuk meningkatkan efektivitas dan efisiensi pengembangan perangkat lunak. Metode awal berfokus pada pencocokan teks kata kunci. Penelitian selanjutnya memperkenalkan **anotasi kode**—deskripsi yang diekstrak dari komentar atau dokumen—untuk memperkaya model pencocokan.

Namun, terdapat tiga masalah utama dalam *code search* saat ini:
1.  **Representasi Kode Tidak Komprehensif:** Sebagian besar fokus hanya pada informasi badan kode itu sendiri, mengabaikan informasi anotasi yang kaya.
2.  **Anotasi Diperlakukan Sama:** Teknologi pencarian yang ada memperlakukan semua informasi anotasi sebagai informasi dengan bobot yang sama, mengabaikan struktur dan spesifisitas bawaan anotasi.
3.  **Strategi Pencarian Sederhana:** Model tidak memiliki strategi yang memadai untuk menangani kondisi pencarian yang kompleks.

::: tip Solusi yang Diusulkan
Kami mengusulkan **CodeHunter**, sebuah mesin *code search* berbasis jaringan saraf tiruan mendalam (*deep neural networks*) yang secara eksplisit memanfaatkan **Anotasi Kode Struktural**. Model ini mengekstrak fitur dari badan kode (melalui AST) dan anotasi (melalui klasifikasi lima kategori), menggabungkannya menjadi anotasi kode multidimensi yang lebih komprehensif untuk meningkatkan akurasi pencarian.
:::

## 2. Metodologi

CodeHunter mengikuti kerangka kerja tiga langkah: ekstraksi fitur kode, ekstraksi fitur anotasi, dan fusi untuk menghasilkan anotasi multidimensi, diikuti dengan pelatihan jaringan *deep embedding*.

### A. Ekstraksi Fitur Kode Berbasis *Abstract Syntax Tree* (AST)

Untuk mendapatkan informasi kode yang komprehensif, CodeHunter menggunakan **Abstract Syntax Tree (AST)**, yang dibangun menggunakan JDT (*Eclipse Java Development Tools*).

1.  **Ekstraksi AST:** Sumber kode Java diubah menjadi AST.
2.  **Ekstraksi Fitur:** Informasi level metode diekstrak dari node AST:
    *   **Nama Metode:** Dipecah berdasarkan aturan *camel case*.
    *   **Parameter Metode:** Diambil dari deklarasi metode.
    *   **Nilai Kembalian (*Return Value*):** Diambil dari deklarasi tipe kembalian.
    *   **Urutan API:** Diekstrak dari badan metode berdasarkan aturan urutan eksekusi, termasuk panggilan bersyarat dan berulang.

### B. Ekstraksi Fitur Anotasi Berbasis Klasifikasi

Anotasi (khususnya Javadoc) mengandung informasi struktural yang penting selain hanya fungsi. CodeHunter mengklasifikasikannya menjadi lima kategori:

1.  **Anotasi Fungsional:** Deskripsi singkat perilaku kode (biasanya kalimat pertama).
2.  **Anotasi Penggunaan (*Usage*):** Informasi tentang penggunaan kode, ditandai dengan `@param` atau `@return`.
3.  **Anotasi Struktural:** Hubungan dengan entitas kode lain, ditandai dengan `@see` atau `@link`.
4.  **Anotasi Pengembangan (*Development*):** Informasi terkait pengembang/versi, ditandai dengan `@author`, `@date`, atau `@version`.
5.  **Anotasi Pengecualian (*Exception*):** Deskripsi pengecualian yang dapat terjadi, ditandai dengan `@throws` atau `@exception`.

Setelah klasifikasi, NLTK (*Natural Language Toolkit*) digunakan untuk *preprocessing* (segmentasi kata, penghapusan *stop word*, dan *Pos Tagging*). Fitur kata diekstrak berdasarkan kategori: misalnya, untuk Fungsional, kata kerja (VB, VBD, dll.) dan kata benda (NN, NNS) diekstrak.

### C. Generasi Anotasi Kode Multidimensi dan Mesin Pencarian

Anotasi Kode Multidimensi dihasilkan dengan menggabungkan Fitur Kode (dari AST) dan Fitur Anotasi (setelah klasifikasi/Pos Tagging).

| Anotasi Fungsional | Anotasi Penggunaan | Anotasi Metode | Anotasi Pengembangan |
| :--- | :--- | :--- | :--- |
| Nama Metode (Kode) | Urutan API (Kode) | Parameter (Kode) | Fitur Pengembangan (Anotasi) |
| Fitur Fungsional (Anotasi) | Fitur Penggunaan (Anotasi) | Nilai Kembalian (Kode) | |
| | Fitur Struktural (Anotasi) | Fitur Pengecualian (Anotasi) | |

Mesin pencari CodeHunter menggunakan jaringan **Deep Annotation Embedded Network** dan **Deep Query Embedded Network** untuk memvektorisasi anotasi dan kueri ke dalam ruang vektor bersama. Kesamaan vektor kemudian diukur (misalnya, *Cosine Similarity*) untuk menentukan peringkat hasil pencarian.

## 3. Detail Pengujian

### Dataset
*   **Sumber:** 100 proyek Java *open-source* teratas di GitHub (berdasarkan *star rating*).
*   **Ukuran:** Total 7.337.263 pasangan *query-code* yang dihasilkan.
*   **Pembagian Data:** $80\%$ untuk pelatihan (5.869.810 metode) dan $20\%$ untuk pengujian (1.468.453 kueri). *Training set* diubah menjadi $58.698.100$ triple $\langle \text{code, positive-description, negative-description} \rangle$.
*   **Pembuatan Kueri:** Kueri dibuat dari anotasi kode yang ada. Jika tidak ada anotasi, nama metode yang tersegmentasi digunakan sebagai kueri.

### Baseline
1.  **Lucene:** Mesin pencari teks lengkap *open-source* berbasis IR.
2.  **DeepCS:** Alat *code search* berbasis *deep learning* (SOTA sebelum CodeHunter) yang hanya menggunakan nama metode, urutan API, dan token dari badan kode.

### Metrik Evaluasi

1.  **Accuracy@K ($A@K$):** Rasio hasil pencarian yang benar muncul di antara $K$ hasil teratas. Dalam eksperimen, $K=1, 5, 10$.
    $$ \text{Accuracy@K} = \frac{1}{S} \sum_{s=1}^{S} f(s < k) $$
    Di mana $S$ adalah total pencarian, dan $f()$ adalah fungsi $1$ jika hasil benar ada di $K$ teratas, dan $0$ sebaliknya.

2.  **Mean Reciprocal Rank (MRR):** Mengukur posisi hasil benar pertama, memberikan bobot yang lebih tinggi pada peringkat yang lebih tinggi.
    $$ \text{MRR} = \frac{1}{S} \sum_{s=1}^{S} \frac{1}{N} $$
    Di mana $S$ adalah total pencarian, dan $N$ adalah posisi peringkat hasil benar yang pertama. Nilai MRR yang lebih besar menunjukkan kinerja yang lebih baik.

## 4. Hasil Eksperimen

### A. Kinerja CodeHunter vs Baseline

| | Lucene | DeepCS | CodeHunter |
| :--- | :--- | :--- | :--- |
| **A@1** | 0.23 | 0.49 | **0.43** |
| **A@5** | 0.47 | 0.72 | **0.78** |
| **A@10** | 0.59 | 0.84 | **0.89** |
| **MRR** | 0.32 | 0.52 | **0.56** |

**Analisis:**
*   **CodeHunter Unggul:** CodeHunter secara signifikan mengungguli Lucene dan sedikit lebih baik daripada DeepCS pada sebagian besar metrik (*terutama A@5, A@10, dan MRR*).
*   **Keunggulan Anotasi:** Meskipun DeepCS memiliki $A@1$ yang sedikit lebih tinggi (0.49 vs 0.43), CodeHunter menunjukkan kinerja superior dalam peringkat secara keseluruhan (MRR 0.56 vs 0.52). Hal ini dikaitkan dengan penggunaan **anotasi kode multidimensi** CodeHunter, yang mencakup informasi anotasi terstruktur, memungkinkannya menangani kueri yang lebih kompleks dengan lebih baik daripada DeepCS yang hanya berfokus pada informasi badan kode dan anotasi fungsional sederhana. CodeHunter rata-rata memperoleh peningkatan $5\%$ atas teknik terpilih lainnya.

### B. Analisis Faktor yang Mempengaruhi CodeHunter

1.  **Ukuran *Training Set*:** Akurasi pencarian mencapai puncaknya ketika *training set* menggunakan sekitar $80\%$ dari total data, memvalidasi rasio pembagian data yang digunakan dalam studi ini.

2.  **Kompleksitas Kueri Pengguna (Panjang Deskripsi):**
| Panjang Kueri | A@1 | A@5 | A@10 |
| :--- | :--- | :--- | :--- |
| 1-5 | 0.38 | 0.67 | 0.79 |
| 11-15 | 0.43 | **0.79** | **0.90** |
| 26+ | 0.41 | 0.74 | 0.86 |

*   CodeHunter menunjukkan **ketahanan** yang baik terhadap perubahan kompleksitas kueri. Akurasi sedikit menurun untuk kueri yang sangat pendek (1-5 kata) karena kurangnya informasi, tetapi secara umum, CodeHunter dapat menyelesaikan tugas pencarian dengan baik untuk kueri dengan berbagai panjang.

## 5. Kesimpulan

CodeHunter berhasil mengatasi keterbatasan representasi anotasi kode yang ada dengan mengusulkan metode ekstraksi **Anotasi Kode Struktural Multidimensi**. Dengan memanfaatkan AST untuk fitur kode dan klasifikasi Javadoc untuk fitur anotasi (fungsional, penggunaan, struktural, pengembangan, pengecualian), CodeHunter menghasilkan representasi yang lebih komprehensif. Divalidasi pada lebih dari 7 juta *snippet* kode, CodeHunter menunjukkan efektivitas yang lebih baik daripada Lucene dan DeepCS, menegaskan bahwa kualitas fitur kode dan anotasi adalah kunci keberhasilan *code search*.

::: info Dampak Praktis
CodeHunter memberikan solusi yang lebih andal untuk *code search* dalam lingkungan pengembangan nyata. Peningkatan akurasi peringkat (MRR) dan kemampuannya menangani kueri yang lebih kompleks menunjukkan bahwa memadukan informasi struktural dan kontekstual dari anotasi sangat penting untuk mendukung pengembang menemukan kode yang relevan dengan cepat dan efisien.
:::