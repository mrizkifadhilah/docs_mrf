---
title: Review Paper - Pencocokan dan Pencarian Graf Mendalam untuk Code Retrieval Semantik
description: Rangkuman paper tentang kerangka kerja Deep Graph Matching and Searching (DGMS) untuk Semantic Code Retrieval berbasis GNN (ACM Trans. Knowl. Discov. Data, 2021).
head:
  - - meta
    - name: keywords
      content: Code Retrieval, Graph Neural Networks (GNNs), Deep Graph Matching, Attention Mechanism, Program Dependence Graph (PDG), Semantic Mapping
---

# 072 - Deep Graph Matching and Searching for Semantic Code Retrieval
[https://doi.org/10.1145/3472782]

**Penulis:** **Wenyu Zhao** $^{\text{a}}$, **Yanyan Jiang** $^{\text{a*}}$, **Chang Xu** $^{\text{a}}$, **Zhenjiang Liang** $^{\text{a}}$

**Afiliasi:**
* $^{\text{a}}$ State Key Laboratory for Novel Software Technology, Department of Computer Science and Technology, Nanjing University, China

**Kronologi:** Received: 28 Oktober 2020 • Revised: 13 Mei 2021 • Accepted: 21 Juni 2021 • Available Online: Desember 2021

<a href="https://www.scimagojr.com/journalsearch.php?q=5800173377&tip=sid" target="_blank"><img src="https://www.scimagojr.com/journal_img.php?id=5800173377" alt="SCImago Journal & Country Rank" /></a>

| Resume Eksekutif |
| :--- |
| **Publikasi:**<br>• **Jurnal:** ACM Transactions on Knowledge Discovery from Data (TKDD), Vol. 15, No. 5, Article 88 (2021).<br>• **Topik:** Peningkatan akurasi *code retrieval* dengan mengatasi *semantic gap* melalui pemodelan struktur kode dan kueri sebagai **graf terstruktur** dan menerapkan *deep graph matching*.<br><br>**Masalah & Solusi:**<br>• **Masalah 1 (Semantic Gap & Struktur):** Metode *code search* berbasis sekuens (misalnya, DeepCS) tidak efektif dalam menjembatani kesenjangan semantik karena mengabaikan informasi **struktural** dan **aliran program** (seperti *Program Dependence Graph/PDG*) yang merupakan inti fungsional kode.<br>• **Masalah 2 (Inefisiensi Graph Matching):** Metode pencocokan graf tradisional memiliki biaya komputasi yang tinggi dan kurang efisien untuk *codebase* skala besar. Model *embedding* graf (GNN) yang ada sering gagal menghasilkan pemetaan *fine-grained* yang akurat antara *node* kueri dan *node* kode.<br>• **Solusi:** Mengusulkan **DGMS** (*Deep Graph Matching and Searching*). DGMS memadukan: (1) *Graph Embedding* yang kaya fitur (memodelkan kode sebagai **PDG**). (2) **Deep Graph Matching** yang efisien (*Graph Matching Network/GMN*) untuk menghitung kesamaan *fine-grained* antara kode dan kueri. (3) Menggunakan **Attention Mechanism** untuk meningkatkan bobot fitur yang relevan.<br><br>**Contoh Penerapan:**<br>• Diuji pada *dataset* CodeSearchNet (Java & Python) dan *dataset* baru **DGMS-CoSQA** (yang menargetkan pertanyaan dari Stack Overflow).<br><br>**Metodologi:**<br>• **Representasi Kode:** Kode diubah menjadi **Program Dependence Graph (PDG)**, yang merupakan representasi semantik mendalam yang menggabungkan *Control Flow* dan *Data Flow*.<br>• **Representasi Kueri:** Kueri diubah menjadi **Graf Kueri (Query Graph)** berdasarkan *dependency parsing* dan *co-occurrence* token.<br>• **Graph Encoding (GGNN):** Menggunakan **Gated Graph Neural Network (GGNN)** untuk menghasilkan *node embedding* yang menangkap konteks lokal.\\• **Deep Graph Matching Network (GMN):** GMN digunakan untuk **operasi pencocokan diferensiabel *fine-grained*** yang membandingkan setiap node di graf kueri dengan setiap node di graf kode, menghasilkan skor kesamaan relasional ($S_{rel}$) dan skor kesamaan embedding ($S_{emb}$).<br>• **Ranking:** Menggunakan **Ranking Loss** untuk memaksimalkan margin antara pasangan positif dan negatif.\\<br>**Temuan Kunci:**<br>1. **Kinerja SOTA:** DGMS mengungguli semua *baseline* SOTA di kedua *dataset*. MRR pada CodeSearchNet mencapai **$81.2\%$** (Python) dan $\mathbf{71.4\%}$ (Java), yang merupakan peningkatan signifikan dibandingkan *baseline* yang ada.\\2. **Pentingnya Pencocokan Graf:** Strategi *Deep Graph Matching* (GMN) terbukti efektif, menghasilkan kinerja yang lebih baik daripada model GNN murni (GGNN) atau model sekuensial (DeepCS).\\3. **Efek Kueri Stack Overflow:** DGMS mencapai MRR $\mathbf{87.4\%}$ pada dataset DGMS-CoSQA yang baru dibuat (kueri Stack Overflow), menunjukkan kinerja yang kuat dalam skenario nyata.\\<br>**Kontribusi Utama:**<br>• Mengusulkan kerangka kerja **DGMS** untuk *code retrieval* berbasis pemodelan graf semantik PDG.\\• Mengimplementasikan **Deep Graph Matching Network (GMN)** untuk pencocokan *fine-grained* yang dapat dibedakan (*differentiable*) antara graf kueri dan graf kode.\\• Menyediakan *dataset* **DGMS-CoSQA** untuk memajukan penelitian pada *code search* berbasis Stack Overflow.\\<br>**Dampak:**<br>• DGMS menyediakan metode yang sangat akurat untuk menjembatani kesenjangan semantik, secara signifikan meningkatkan efektivitas *code search* dan memfasilitasi *code reuse* yang lebih andal di industri. |

## 1. Pendahuluan & Masalah

*Code retrieval* (pengambilan kode) telah menjadi fokus utama dalam rekayasa perangkat lunak karena pengguna mencari cuplikan kode yang relevan dengan kueri bahasa alami (NL) mereka. Meskipun *Deep Learning* (DL) telah berhasil memetakan NL dan PL ke dalam ruang vektor bersama, akurasi masih terbatas karena tiga tantangan:

1.  **Semantic Gap:** Kurangnya kesamaan leksikal antara NL dan PL, yang menyebabkan kegagalan pencocokan.
2.  **Keterbatasan Representasi Sekuensial:** Model *sequence encoding* (misalnya, RNN, Bi-LSTM) gagal menangkap informasi **struktural** (seperti *Abstract Syntax Tree*, AST) dan **aliran program** (seperti *Data Flow Graph*, DFG, dan *Control Flow Graph*, CFG) yang sangat penting untuk semantik kode.
3.  **Inefisiensi Graph Matching:** Meskipun model *Graph Neural Network* (GNN) mencoba mengatasi hal ini, mereka sering gagal menghasilkan pemetaan *fine-grained* yang akurat antara *node* kueri dan *node* kode, atau memiliki biaya komputasi yang tinggi.

::: tip Solusi yang Diusulkan
Kami mengusulkan **DGMS** (*Deep Graph Matching and Searching*), sebuah kerangka kerja baru. DGMS mengatasi masalah ini dengan: (1) Memanfaatkan **Program Dependence Graph (PDG)** yang merupakan representasi semantik mendalam kode. (2) Menggunakan **Gated Graph Neural Networks (GGNN)** dan **Deep Graph Matching Network (GMN)** untuk pencocokan *fine-grained* yang efisien pada tingkat *node* antar-graf.
:::

## 2. Metodologi

DGMS memiliki kerangka kerja yang terdiri dari *Graph Generation*, *Graph Encoding*, *Deep Graph Matching*, dan *Ranking*.

### A. Graph Generation dan Encoding (GNN)

1.  **Program Dependence Graph (PDG):** Kode diubah menjadi **PDG**, yang secara intrinsik menggabungkan *data flow* dan *control flow* di antara pernyataan-pernyataan, mewakili logika fungsional kode secara lebih akurat daripada AST atau CFG individual.
2.  **Query Graph:** Kueri NL diubah menjadi **Graf Kueri** menggunakan *dependency parsing* dan informasi *co-occurrence* token.
3.  **Graph Encoding:** Kedua graf ($G_p, G_q$) di-*embed* menggunakan **Gated Graph Neural Network (GGNN)**. GGNN efektif dalam menyebarkan informasi antar *node* (pesan) untuk menghasilkan *node embedding* ($X_p, X_q$) yang kaya konteks lokal.

### B. Deep Graph Matching Network (GMN)

GMN adalah inti dari DGMS. GMN digunakan untuk secara eksplisit membandingkan dua graf ($G_p$ dan $G_q$) untuk menghasilkan vektor kesamaan:

1.  **Pencocokan *Node-level*:** Untuk setiap *node* kueri ($v_q$), GMN menghitung skor kesamaan dengan semua *node* kode ($v_p$). Berdasarkan skor ini, GMN menghitung representasi *context* baru ($u_{q \to p}$) untuk $v_q$ dari perspektif $G_p$, dan sebaliknya ($u_{p \to q}$). Proses ini diulang-ulang.
2.  **Tensor Kesamaan:** GMN menghasilkan skor kesamaan $S_{rel}$ (skor relasional) dan $S_{emb}$ (skor *embedding*) untuk setiap pasangan *node* kueri-kode.
3.  **Vektor Kesamaan Akhir:** Skor ini kemudian diagregasi dan dilewatkan melalui lapisan *fully connected* (MLP) untuk menghasilkan vektor kesamaan gabungan $V_{sim}$ (Eq. 9 pada dokumen), yang mewakili kemiripan semantik kedua graf.

### C. Ranking dan Loss Function

Model dioptimalkan menggunakan **Ranking Loss** (Triplet Loss) untuk memaksimalkan skor kesamaan pasangan positif dan meminimalkan skor pasangan negatif:
$$\mathcal{L}(\theta)=\sum_{(D,C^{+},C^{-})\in T}\max(0,\epsilon-s(d,c^{+})+s(d,c^{-}))$$
Di mana $s(\cdot,\cdot)$ adalah skor kemiripan (vektor $V_{sim}$).

## 3. Detail Pengujian

### Dataset
* **CodeSearchNet (CSN):** Dataset *benchmark* utama (Java, Python).
* **DGMS-CoSQA:** *Dataset* baru yang dibuat dari pertanyaan Stack Overflow (berisi 2500 pasangan kueri-kode), digunakan untuk menguji efektivitas DGMS dalam skenario *real-world* Stack Overflow.

### Baseline
Model dibandingkan dengan *baseline* SOTA:
* **DeepCS** (RNN/MLP)
* **CodeBERT/GraphCodeBERT** (PTMs)
* **GraphSearchNet** (GNN yang ditingkatkan)
* **UNIF** (Attention-based)

### Metrik Evaluasi
Metrik utama: **MRR (Mean Reciprocal Rank)** dan **Success Rate@k** (S@k).

$$MRR=\frac{1}{|Q|}\sum_{i=1}^{|Q|}\frac{1}{Rank_{i}}$$

## 4. Hasil Eksperimen

### A. Perbandingan Kinerja Utama (CodeSearchNet)

| Model | MRR (Java) | MRR (Python) | S@10 (Java) | S@10 (Python) |
| :--- | :--- | :--- | :--- | :--- |
| DeepCS | 0.490 | 0.540 | 0.706 | 0.751 |
| GraphSearchNet | 0.692 | 0.730 | 0.812 | 0.835 |
| **DGMS** | **0.714** | **0.812** | **0.838** | **0.879** |

* **Peningkatan SOTA:** DGMS melampaui *baseline* SOTA berbasis graf (GraphSearchNet) dengan margin yang signifikan (MRR Python $\mathbf{81.2\%}$ vs $73.0\%$).

### B. Kinerja pada Kueri Stack Overflow (DGMS-CoSQA)

DGMS mencapai MRR $\mathbf{87.4\%}$ dan SR@10 $\mathbf{98.5\%}$ pada *dataset* DGMS-CoSQA. Kinerja yang sangat tinggi ini menunjukkan bahwa pemodelan PDG dan GMN sangat cocok untuk skenario *code retrieval* berbasis Stack Overflow.

### C. Studi Ablasi (Kontribusi GMN)

Studi ablasi mengkonfirmasi peran penting GMN:
* Model yang hanya menggunakan *sequence encoder* tanpa GMN menunjukkan kinerja yang jauh lebih rendah.
* Penambahan GMN ke *encoder* struktural meningkatkan MRR sebesar $\mathbf{15\%}$ hingga $\mathbf{20\%}$ tergantung konfigurasi.

## 5. Kesimpulan

DGMS berhasil mengusulkan kerangka kerja *deep graph matching* yang sangat efektif untuk *semantic code retrieval*. Dengan memanfaatkan **PDG** (representasi semantik mendalam kode) dan **Deep Graph Matching Network (GMN)** untuk pencocokan *fine-grained* antar-graf, DGMS mengatasi kelemahan representasi sekuensial dan menetapkan *state-of-the-art* baru pada *dataset* utama CodeSearchNet. Efek *deep graph matching* dari GMN terbukti sangat efektif dalam menghasilkan pemetaan semantik yang akurat.

::: info Dampak Praktis
DGMS menyediakan metode *code retrieval* yang sangat andal dan akurat untuk digunakan di industri, terutama dalam skenario di mana integritas struktural dan fungsional kode sangat penting (misalnya, deteksi *bug* atau analisis penggunaan API). Keberhasilannya juga memvalidasi bahwa PDG, daripada AST atau CFG, adalah representasi graf yang paling berharga untuk tugas *code search* berbasis semantik.
:::